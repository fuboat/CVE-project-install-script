#!/bin/sh

# target exec file: ./jpeg_encoder/jpeg_encoder

git clone https://github.com/thejinchao/jpeg_encoder.git
cd jpeg_encoder || exit
clang++ -fsanitize=address jpeg_encoder.cpp test.cpp -o jpeg_encoder


mkdir crashes
wget https://raw.githubusercontent.com/fouzhe/security/master/jpeg_encoder/heap_buffer_overflow_readFromBMP\
     -O crashes/heap_buffer_overflow_readFromBMP
./jpeg_encoder crashes/heap_buffer_overflow_readFromBMP
