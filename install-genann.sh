#!/bin/bash

# target exec file: ./genann/example1

rm -rf genann

git clone https://github.com/codeplea/genann.git
cd genann || exit
git checkout 4f72209510c9792131bd8c4b0347272b088cfa80 -f
wget https://raw.githubusercontent.com/fCorleone/fuzz_programs/master/genann/example1.c -O example1.c
sed -i '1s/.*//' Makefile
sed -i '2s/.*/LDLIBS = -lm/' Makefile
make

mkdir crashes
wget https://raw.githubusercontent.com/fCorleone/fuzz_programs/master/genann/testcase -O crashes/testcase
wget https://raw.githubusercontent.com/fCorleone/fuzz_programs/master/genann/testcase2 -O crashes/testcase2
./example1 crashes/testcase
./example1 crashes/testcase2

cp ./example1 ./genann-custom
