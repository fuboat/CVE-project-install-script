#!/bin/bash

dir=$(cd `dirname $0`;pwd)

rm -rf bigint

git clone https://github.com/983/bigint
cd bigint || exit
git checkout -f ee0834c65a27d18fa628e6c526a0b83b24db90f9

wget https://raw.githubusercontent.com/fuboat/CVE-project-install-script/main/others/bigint--makefile -O Makefile
make

wget https://raw.githubusercontent.com/fuboat/CVE-project-install-script/main/others/bigint--target.c -O target.c
$CC -c $CFLAGS $CPPFLAGS bigint.c -o bigint.o
$CC -c $CFLAGS $CPPFLAGS target.c -o target.o
$CC $CXXFLAGS $CPPFLAGS $LDFLAGS bigint.o target.o -I "$dir"/include "$dir"/others/afl-compiler-rt.o "$dir"/others/aflpp_driver.c -o bigint

# how to run
./bigint @@