#!/bin/bash

rm -rf SmallerC

git clone https://github.com/alexfru/SmallerC
cd SmallerC || exit
git checkout -f 177650342af56c873155817e48d3385672931b90

sed -i "9s/.*//" common.mk
sed -i "6s/.*/CFLAGS += -pipe -Wall -O2/" common.mk


./configure --disable-shared
make

#how to run
./smlrpp @@
./n2f -f elf @@ -o out.elf
