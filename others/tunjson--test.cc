#include <iostream>
#include "json.hh"

using namespace std;
using namespace JSON;

int main(int argc, char const* argv[])
{
    // Load JSON file
    try {
    Value v = parse_file(argv[1]);
    cerr << v << endl;
    cerr << "---" << endl;

    // Build object programmatically
    Object obj;

    obj["foo"] = true;
    obj["bar"] = 3LL;
    obj["bar"] = 3L;
    obj["bar"] = 3;

    Object o;
    o["failure"] = true;
    o["success"] = "no way";

    obj["baz"] = o;

    Array a;
    a.push_back(true);
    a.push_back("asia");
    a.push_back("europa");
    a.push_back(55LL);
    a.push_back(3.12L);
    a.push_back(3.12);

    obj["beer"] = a;

    cerr << obj << endl;
    }
    catch (std::exception& e){ std::cerr << "exception: " << e.what() << std::endl; }

    return 0;
}
